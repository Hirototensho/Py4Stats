# Py4Stats 開発記録

## モジュール構成

```python
py4stats
├ メインモジュール               # Import py4stats で直接読み込み
│ ├ eda_tools                   # 探索的データ解析と前処理
│ │ ├ _.nw                         # narwhals ベースの現行実装
│ │ └ _.pandas                     # Pandas ベースの旧実装（廃止予定）
│ └ regression_tools            # 回帰分析の可視化と表作成
└ サブモジュール                 # Import py4stats では読み込まれない
　 ├ heckit_helper               #regression_tools の追加メソッド
　 └ building_block              # 内部実装用のアサーション関数とユーティリティ関数を提供
 ```

## Py4Stats ライブラリのインポート

``` python
# ライブラリの読み込み（推奨）
import py4stats as py4st

# サブモジュールの読み込み
from py4stats import heckit_helper
from py4stats import building_block as build 

# eda_tools のバックエンド別実装の明示的な読み込み
from py4stats.eda_tools import _nw as eda_nw
from py4stats.eda_tools import _pandas as eda_pd
```

## ディレクトリ構成
2026年1月14日 現在

``` python
Py4Stats 
├── INTRODUCTION.md
├── README.md
├── articles                            # APIドキュメント以外の公開記事
├── man                                 # APIの公開ドキュメント
│   ├── diagnose.md
│   ...
│   └── image                           # ドキュメントに使用する画像
├── py4stats
│   ├── __init__.py                     # Py4Stats の Import 時に読み込まれる関数を定義
│   ├── building_block.py               # 引数のアサーションなどユーティリティモジュール
│   ├── eda_tools                       # 探索的データ解析
│   │   ├── __init__.py
│   │   ├── _nw.py                      # バックエンドに narwhals を使用した実装
│   │   └── _pandas.py                  # バックエンドに pandas を使用した旧仕様
│   ├── heckit_helper.py
│   └── regression_tools.py             # 回帰分析の可視化と作表
├── pyproject.toml
├── reference.md
├── setup.ipynb
├── setup.py
└── tests                              # APIのテストコード
    ├── fixtures                       # 自動テストで参照するデータ
    ├── test_building_block.py
    ├── test_eda_tools_nw.py
    ├── test_eda_tools_pandas.py
    ├── test_heckit_helper.py
    └── test_regression_tools.py
```

**注意**：`eda_tools._pandas.py` は 非推奨扱いで将来的に廃止する予定です。

## リポジトリの運用方針

![Py4Statsリポジトリの運用方針](./Py4Statsリポジトリの運用方針.png)

## セマンティック バージョニングについてのメモ

Py4Stats ライブラリのバージョンは次の方式のセマンティック バージョニングで管理します(e.g. `v 0.1.0`)。

    v MAJOR.MINOR.PATCH

`v MAJOR.MINOR.PATCH` の各要素は、次の規則で更新します。

1. `MAJOR` APIの変更に互換性のない場合はメジャーバージョンを上げる
2. `MINOR` 後方互換性があり機能性を追加した場合はマイナーバージョンを上げる
3. `PATCH` 後方互換性を伴うバグ修正をした場合はパッチバージョンを上げる

## デザインパターン

### 引数のアサーション

```python
from py4stats import building_block as build 
# 文字列引数のアサーション（選択肢を制限）
arg = build.arg_match(
    arg,  values = ['option_1', 'option_2'],  
    arg_name = 'arg', 
    )
```

```python
build.assert_logical(arg, arg_name = 'arg')   # ブール値
build.assert_character(arg, arg_name = 'arg') # 文字列
build.assert_numeric(arg, arg_name = 'arg')   # 数値(int or float)
build.assert_integer(arg, arg_name = 'arg')   # 整数値(int)
build.assert_count(arg, arg_name = 'arg')     # 非負整数値(int)
build.assert_float(arg, arg_name = 'arg')     # フロート値(float)
```